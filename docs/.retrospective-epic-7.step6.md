## Step 6 — Action Items, Preparation Sprint, Critical Path (Epic 7 ➜ Epic 8)

Facilitator: Bob (Scrum Master)

----------------------------------------
EPIC 7 ACTION ITEMS

Process Improvements
1. Enforce standard timeout policy across router/providers (Owner: Amelia, By: 2 days)
2. Align structured logging schema and redact rules across modules (Owner: Winston, By: 2 days)
3. Add CI checks to prevent PII in analytics logs (Owner: Amelia, By: 1 day)

Technical Debt
1. Consolidate duplicate timeout handling into a single utility (Owner: Amelia, Priority: High)
2. Replace ad-hoc log fields with typed logger helpers (Owner: Winston, Priority: Medium)

Documentation
1. Update developer guide for adding providers (final pass + examples) (Owner: Mary, By: 1 day)

Team Agreements
- Non-blocking analytics is mandatory; never throw to request path
- 2s timeout default unless explicitly overridden with justification
- Log schema stable; no attribute values that may include PII

----------------------------------------
EPIC 8 PREPARATION SPRINT

Technical Setup
[ ] Configure Wrangler secrets (GA4_API_SECRET) and env (GA4_MEASUREMENT_ID) (Owner: Amelia, Est: 0.5d)
[ ] Ensure ANALYTICS_PROVIDERS includes `ga4` in target envs (Owner: Winston, Est: 0.25d)
[ ] Verify AbortSignal.timeout availability and polyfill if needed (Owner: Amelia, Est: 0.25d)

Knowledge/Design
[ ] Finalize GA4 payload mapping from TrackingParams (Owner: Mary, Est: 0.5d)
[ ] Decide client_id generation approach (UUID vs. hash) and document rationale (Owner: Winston, Est: 0.25d)

Testing/Tooling
[ ] Unit tests: payload builder (full/minimal/custom) (Owner: Amelia, Est: 1d)
[ ] Unit/Integration: sendGA4Event (URL, headers, 2s timeout, error handling) (Owner: Amelia, Est: 1d)
[ ] Miniflare integration on `/r`: GA4 send before redirect; failures don’t block (Owner: Amelia, Est: 1d)
[ ] Observability snapshot tests for log shape (no PII) (Owner: DevOps, Est: 0.5d)

Total Estimated Effort: 6.0 days (single-threaded); parallelizable across roles

----------------------------------------
CRITICAL PATH — Must Complete Before Starting Epic 8
1. Secrets configured and verified in target environment(s) (Owner: Amelia, Due: prior to kickoff)
2. GA4 payload mapping approved (Owner: Mary, Due: prior to kickoff)
3. Router timeout non-blocking behavior verified with tests (Owner: Amelia, Due: prior to kickoff)
4. Structured logging schema confirmed and implemented (Owner: Winston, Due: prior to kickoff)

Risks & Mitigations
- ENV misconfiguration: add startup checks and clear warnings; document setup
- External latency/timeout: enforce 2s timeout; monitor logs; no retries in P0
- Schema drift: treat builder as single source of truth; keep tests authoritative

Notes
- If helper workflow for sprint-status updates is unavailable, track retrospective status manually in docs until tooling is in place.
